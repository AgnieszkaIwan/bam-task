import { defineConfig } from "vite";
import { resolve } from "path";

export default defineConfig({
  root: ".",                            // project root (contains index.html)
  publicDir: "public",                  // static assets copied verbatim

  resolve: {
    alias: {
      "@": resolve(__dirname, "src"),   // e.g. import foo from "@/utils/foo.js"
    },
  },

  css: {
    // Enable global SCSS variables/mixins across modules (optional)
    preprocessorOptions: {
      scss: {
        additionalData: "@import '@/styles/_variables.scss';",
      },
    },
  },

  build: {
    outDir: "dist",                     // output folder
    emptyOutDir: true,
    rollupOptions: {
      input: resolve(__dirname, "index.html"),
      output: {
        // Force deterministic filenames so the recruiter sees bundle.js/style.css
        entryFileNames: "bundle.js",
        assetFileNames: ({ name }) => {
          // Keep style.css predictable, leave others hashed in /assets/
          if (name && name.endsWith(".css")) return "style.css";
          return "assets/[name]-[hash][extname]";
        },
      },
    },
  },
});
